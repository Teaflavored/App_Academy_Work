<html>
  <body>
    <canvas width="500" height="500" id="canvas"></canvas>
    <script>
      //shim layer for setTimeout fallback
      window.requestAnimFrame = (function(){
        return  window.requestAnimationFrame       ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame    ||
                window.oRequestAnimationFrame      ||
                window.msRequestAnimationFrame     ||
                function( callback ){
                  window.setTimeout(callback, 1000 / 60);
                };
      })();
      var x = 0;
      function drawIt(){
        window.requestAnimFrame(drawIt);
        var canvas = document.getElementById("canvas");
        var c = canvas.getContext("2d");
        c.clearRect(0, 0, canvas.width, canvas.height)
        c.fillStyle = "red";
        c.fillRect(x , 100, 200, 100);
        x += 5;
      }

      window.requestAnimFrame(drawIt);
    </script>
  </body>
</html>
